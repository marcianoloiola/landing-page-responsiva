<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Atendimento - Hospital Metropolitano</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Estilos mínimos -->
    <style>
        body {
            background-color: #f8f9fa;
        }
        .specialty-btn {
            margin: 10px;
            padding: 20px;
            font-size: 1.2rem;
        }
        #print-area {
            display: none;
            font-family: 'Courier New', Courier, monospace;
            font-size: 10pt;
            white-space: pre; /* Preserva quebras de linha e espaços */
        }
        #debug-area {
            margin-top: 20px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 12pt;
            border: 1px solid #ccc;
            padding: 10px;
            display: none;
        }
        @media print {
            body * {
                visibility: hidden;
            }
            #print-area, #print-area * {
                visibility: visible;
            }
            #print-area {
                position: absolute;
                left: 0;
                top: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container text-center my-5">
        <h1 class="mb-4">Hospital Metropolitano - Painel de Atendimento</h1>
        <div class="row justify-content-center">
            <div class="col-12 col-md-6">
                <button class="btn btn-primary specialty-btn w-100" onclick="generateTicket('Clínica Geral')">1 - Clínica Geral</button>
            </div>
            <div class="col-12 col-md-6">
                <button class="btn btn-primary specialty-btn w-100" onclick="generateTicket('Pediatria')">2 - Pediatria</button>
            </div>
            <div class="col-12 col-md-6">
                <button class="btn btn-primary specialty-btn w-100" onclick="generateTicket('Bariátrica')">3 - Bariátrica</button>
            </div>
            <div class="col-12 col-md-6">
                <button class="btn btn-primary specialty-btn w-100" onclick="generateTicket('Cardiologia')">4 - Cardiologia</button>
            </div>
            <div class="col-12 col-md-6">
                <button class="btn btn-primary specialty-btn w-100" onclick="generateTicket('Ortopedia')">5 - Ortopedia</button>
            </div>
            <div class="col-12 col-md-6">
                <button class="btn btn-primary specialty-btn w-100" onclick="generateTicket('Neurologia')">6 - Neurologia</button>
            </div>
            <div class="col-12 col-md-6">
                <button class="btn btn-primary specialty-btn w-100" onclick="generateTicket('Psiquiatria')">7 - Psiquiatria</button>
            </div>
        </div>
        <!-- Área de depuração -->
        <div id="debug-area"></div>
    </div>

    <!-- Área de impressão -->
    <div id="print-area"></div>

    <!-- Bootstrap JS e Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- JavaScript para geração de senhas -->
    <script>
        // Contadores de senhas por especialidade
        const ticketCounters = {
            'Clínica Geral': 0,
            'Pediatria': 0,
            'Bariátrica': 0,
            'Cardiologia': 0,
            'Ortopedia': 0,
            'Neurologia': 0,
            'Psiquiatria': 0
        };

        function generateTicket(specialty) {
            // Incrementa o contador da especialidade
            ticketCounters[specialty]++;
            const ticketNumber = ticketCounters[specialty].toString().padStart(3, '0');
            const ticketCode = `${specialty.charAt(0)}${ticketNumber}`;
            
            // Conteúdo da impressão em texto puro
            const printContent = `Hospital Metropolitano\nEspecialidade: ${specialty}\nSenha: ${ticketCode}\n`;
            
            // Atualiza a área de impressão
            document.getElementById('print-area').textContent = printContent;
            
            // Mostra o conteúdo na área de depuração
            const debugArea = document.getElementById('debug-area');
            debugArea.style.display = 'block';
            debugArea.textContent = 'Conteúdo a ser impresso:\n' + printContent;
            
            // Força a renderização e imprime
            window.requestAnimationFrame(() => {
                window.print();
            });
        }
    </script>
</body>
</html>